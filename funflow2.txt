-- Hoogle documentation, generated by Haddock
-- See Hoogle, http://www.haskell.org/hoogle/


-- | Make composable workflows
--   
--   See README at <a>https://github.com/tweag/funflow/funflow2</a>
@package funflow2
@version 0.1.0

module Funflow.Flows.Command
data CommandFlow i o
[ShellCommandFlow] :: Text -> CommandFlow () ()

module Funflow.Flows.Docker
data DockerFlowConfig
DockerFlowConfig :: Text -> Text -> [Text] -> DockerFlowConfig
[image] :: DockerFlowConfig -> Text
[command] :: DockerFlowConfig -> Text
[args] :: DockerFlowConfig -> [Text]
data DockerFlow i o
[DockerFlow] :: DockerFlowConfig -> DockerFlow () ()

module Funflow.Flows.Executor
data ExecutorFlowConfig
ExecutorFlowConfig :: Text -> [Text] -> [(Text, Text)] -> ExecutorFlowConfig
[command] :: ExecutorFlowConfig -> Text
[args] :: ExecutorFlowConfig -> [Text]
[env] :: ExecutorFlowConfig -> [(Text, Text)]
data ExecutorFlow i o
[ExecutorFlow] :: ExecutorFlowConfig -> ExecutorFlow () ()

module Funflow.Flows.Nix
data NixpkgsSource

-- | Inherit the <tt>NIX_PATH</tt> from the environment
NIX_PATH :: NixpkgsSource

-- | The <a>URI</a> pointing to a nixpkgs tarball
NixpkgsTarball :: URI -> NixpkgsSource
data NixFlowConfig
NixFlowConfig :: Environment -> NixpkgsSource -> Text -> [Text] -> [(Text, Text)] -> NixFlowConfig

-- | Specification of the nix environment
[nixEnv] :: NixFlowConfig -> Environment

-- | Which version of nixpkgs to use
[nixpkgsSource] :: NixFlowConfig -> NixpkgsSource

-- | The command to run in the environment
[command] :: NixFlowConfig -> Text

-- | Arguments to pass to the command
[args] :: NixFlowConfig -> [Text]

-- | Environmental variables which are set in the environment
[env] :: NixFlowConfig -> [(Text, Text)]
data Environment

-- | Path to a shell.nix file
ShellFile :: Text -> Environment

-- | A list of packages that will be passed by <tt>-p</tt>.
PackageList :: [Text] -> Environment
data NixFlow i o
[NixFlow] :: NixFlowConfig -> NixFlow () ()
instance GHC.Generics.Generic Funflow.Flows.Nix.Environment
instance GHC.Generics.Generic Funflow.Flows.Nix.NixpkgsSource
instance Data.CAS.ContentHashable.ContentHashable GHC.Types.IO Funflow.Flows.Nix.Environment
instance Data.CAS.ContentHashable.ContentHashable GHC.Types.IO Funflow.Flows.Nix.NixpkgsSource

module Funflow.Flows.Simple
data SimpleFlow i o
[Pure] :: (i -> o) -> SimpleFlow i o
[IO] :: (i -> IO o) -> SimpleFlow i o

module Funflow.Base
type Flow input output = forall m. (MonadIO m) => AnyRopeWith RequiredStrands (RequiredCoreEffects m) input output
type RequiredStrands = '[ '("simple", SimpleFlow), '("command", CommandFlow), '("executor", ExecutorFlow), '("docker", DockerFlow), '("nix", NixFlow)]
type RequiredCoreEffects m = '[Arrow, ProvidesCaching, HasKleisli m]
runFlow :: Flow input output -> input -> IO output
interpretSimpleFlow :: (Arrow a, HasKleisliIO m a) => SimpleFlow i o -> a i o
interpretExecutorFlow :: (Arrow a, HasKleisliIO m a) => ContentStore -> ExecutorFlow i o -> a i o

module Funflow.Flows
pureFlow :: (i -> o) -> Flow i o
ioFlow :: (i -> IO o) -> Flow i o
shellFlow :: Text -> Flow () ()
executorFlow :: ExecutorFlowConfig -> Flow () ()
dockerFlow :: DockerFlowConfig -> Flow () ()
nixFlow :: NixFlowConfig -> Flow () ()

module Funflow
type Flow input output = forall m. (MonadIO m) => AnyRopeWith RequiredStrands (RequiredCoreEffects m) input output
runFlow :: Flow input output -> input -> IO output

-- | Any rope whose core provides caching can run cached tasks. The task is
--   identified by an explicit identifier
caching :: forall (core :: Type -> Type -> Type) ident a b (r :: RopeRec) (mantle :: [Strand]). (Arrow core, ProvidesCaching core, ContentHashable IO ident, ContentHashable IO a, Store b) => ident -> Rope r mantle core a b -> Rope r mantle core a b
pureFlow :: (i -> o) -> Flow i o
ioFlow :: (i -> IO o) -> Flow i o
shellFlow :: Text -> Flow () ()
executorFlow :: ExecutorFlowConfig -> Flow () ()
dockerFlow :: DockerFlowConfig -> Flow () ()
nixFlow :: NixFlowConfig -> Flow () ()
