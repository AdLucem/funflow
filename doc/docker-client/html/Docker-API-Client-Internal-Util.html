<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Docker.API.Client.Internal.Util</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">docker-client-0.1.0: Funflow's internal docker engine client</span><ul class="links" id="page-menu"><li><a href="src/Docker.API.Client.Internal.Util.html">Source</a></li><li><a href="../../share/doc/index.html">Contents</a></li><li><a href="../../share/doc/doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Docker.API.Client.Internal.Util</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p><code>Util</code> contains various utility functions used throughout Docker.API.Client's internals.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:containerSpecToCreateContainer">containerSpecToCreateContainer</a> :: <a href="Docker-API-Client-Internal-Types.html#t:ContainerSpec" title="Docker.API.Client.Internal.Types">ContainerSpec</a> -&gt; <a href="Docker-API-Client-Internal-Schemas.html#t:CreateContainer" title="Docker.API.Client.Internal.Schemas">CreateContainer</a></li><li class="src short"><a href="#v:readUpstream">readUpstream</a> :: <a href="file:///nix/store/56219d4vxc53ql65znq7a44rzbxcxapj-base-compat-lib-base-compat-0.11.1-haddock-doc/share/doc/base-compat/html/Control-Monad-Compat.html#t:Monad" title="Control.Monad.Compat">Monad</a> m =&gt; <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> -&gt; <a href="file:///nix/store/fvxp4h4smnk2lgs6x7skf3w1smgcx16b-basement-lib-basement-0.0.11-haddock-doc/share/doc/basement/html/Basement-Compat-Base.html#t:Int" title="Basement.Compat.Base">Int</a> -&gt; <a href="file:///nix/store/h7rgfn42l8i9kiiyk7jsg6506z5dsgm0-conduit-lib-conduit-1.3.2.1-haddock-doc/share/doc/conduit/html/Data-Conduit.html#t:ConduitT" title="Data.Conduit">ConduitT</a> <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> o m (<a href="file:///nix/store/fvxp4h4smnk2lgs6x7skf3w1smgcx16b-basement-lib-basement-0.0.11-haddock-doc/share/doc/basement/html/Basement-Compat-Base.html#t:Maybe" title="Basement.Compat.Base">Maybe</a> <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>)</li><li class="src short"><a href="#v:getStreamType">getStreamType</a> :: <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> -&gt; <a href="Docker-API-Client-Internal-Types.html#t:DockerStreamType" title="Docker.API.Client.Internal.Types">DockerStreamType</a></li><li class="src short"><a href="#v:getSectionLength">getSectionLength</a> :: <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> -&gt; <a href="file:///nix/store/fvxp4h4smnk2lgs6x7skf3w1smgcx16b-basement-lib-basement-0.0.11-haddock-doc/share/doc/basement/html/Basement-Compat-Base.html#t:Int" title="Basement.Compat.Base">Int</a></li><li class="src short"><a href="#v:parseDockerStream">parseDockerStream</a> :: <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> -&gt; (<a href="Docker-API-Client-Internal-Types.html#t:DockerStreamType" title="Docker.API.Client.Internal.Types">DockerStreamType</a>, <a href="file:///nix/store/fvxp4h4smnk2lgs6x7skf3w1smgcx16b-basement-lib-basement-0.0.11-haddock-doc/share/doc/basement/html/Basement-Compat-Base.html#t:Int" title="Basement.Compat.Base">Int</a>, <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>)</li><li class="src short"><a href="#v:parseMultiplexedDockerStream">parseMultiplexedDockerStream</a> :: <a href="file:///nix/store/h7rgfn42l8i9kiiyk7jsg6506z5dsgm0-conduit-lib-conduit-1.3.2.1-haddock-doc/share/doc/conduit/html/Conduit.html#t:MonadIO" title="Conduit">MonadIO</a> m =&gt; <a href="file:///nix/store/h7rgfn42l8i9kiiyk7jsg6506z5dsgm0-conduit-lib-conduit-1.3.2.1-haddock-doc/share/doc/conduit/html/Data-Conduit.html#t:ConduitT" title="Data.Conduit">ConduitT</a> <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> (<a href="Docker-API-Client-Internal-Types.html#t:DockerStreamType" title="Docker.API.Client.Internal.Types">DockerStreamType</a>, <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>) m ()</li><li class="src short"><a href="#v:createLogTypeFilter">createLogTypeFilter</a> :: <a href="Docker-API-Client-Internal-Types.html#t:ContainerLogType" title="Docker.API.Client.Internal.Types">ContainerLogType</a> -&gt; (<a href="Docker-API-Client-Internal-Types.html#t:DockerStreamType" title="Docker.API.Client.Internal.Types">DockerStreamType</a>, a) -&gt; <a href="file:///nix/store/fvxp4h4smnk2lgs6x7skf3w1smgcx16b-basement-lib-basement-0.0.11-haddock-doc/share/doc/basement/html/Basement-Compat-Base.html#t:Bool" title="Basement.Compat.Base">Bool</a></li><li class="src short"><a href="#v:chownTarballContent">chownTarballContent</a> :: <a href="file:///nix/store/m9v8rxbg6rqcq45virm46d1r2ixayzqk-tar-conduit-lib-tar-conduit-0.3.2-haddock-doc/share/doc/tar-conduit/html/Data-Conduit-Tar-Types.html#t:UserID" title="Data.Conduit.Tar.Types">UserID</a> -&gt; <a href="file:///nix/store/m9v8rxbg6rqcq45virm46d1r2ixayzqk-tar-conduit-lib-tar-conduit-0.3.2-haddock-doc/share/doc/tar-conduit/html/Data-Conduit-Tar-Types.html#t:GroupID" title="Data.Conduit.Tar.Types">GroupID</a> -&gt; <a href="file:///nix/store/m9v8rxbg6rqcq45virm46d1r2ixayzqk-tar-conduit-lib-tar-conduit-0.3.2-haddock-doc/share/doc/tar-conduit/html/Data-Conduit-Tar-Types.html#t:FileInfo" title="Data.Conduit.Tar.Types">FileInfo</a> -&gt; <a href="file:///nix/store/m9v8rxbg6rqcq45virm46d1r2ixayzqk-tar-conduit-lib-tar-conduit-0.3.2-haddock-doc/share/doc/tar-conduit/html/Data-Conduit-Tar-Types.html#t:FileInfo" title="Data.Conduit.Tar.Types">FileInfo</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:containerSpecToCreateContainer" class="def">containerSpecToCreateContainer</a> :: <a href="Docker-API-Client-Internal-Types.html#t:ContainerSpec" title="Docker.API.Client.Internal.Types">ContainerSpec</a> -&gt; <a href="Docker-API-Client-Internal-Schemas.html#t:CreateContainer" title="Docker.API.Client.Internal.Schemas">CreateContainer</a> <a href="src/Docker.API.Client.Internal.Util.html#containerSpecToCreateContainer" class="link">Source</a> <a href="#v:containerSpecToCreateContainer" class="selflink">#</a></p><div class="doc"><p>(Internal only, do not export) Converts a client ContainerSpec into the format expected by the docker api</p></div></div><div class="top"><p class="src"><a id="v:readUpstream" class="def">readUpstream</a> :: <a href="file:///nix/store/56219d4vxc53ql65znq7a44rzbxcxapj-base-compat-lib-base-compat-0.11.1-haddock-doc/share/doc/base-compat/html/Control-Monad-Compat.html#t:Monad" title="Control.Monad.Compat">Monad</a> m =&gt; <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> -&gt; <a href="file:///nix/store/fvxp4h4smnk2lgs6x7skf3w1smgcx16b-basement-lib-basement-0.0.11-haddock-doc/share/doc/basement/html/Basement-Compat-Base.html#t:Int" title="Basement.Compat.Base">Int</a> -&gt; <a href="file:///nix/store/h7rgfn42l8i9kiiyk7jsg6506z5dsgm0-conduit-lib-conduit-1.3.2.1-haddock-doc/share/doc/conduit/html/Data-Conduit.html#t:ConduitT" title="Data.Conduit">ConduitT</a> <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> o m (<a href="file:///nix/store/fvxp4h4smnk2lgs6x7skf3w1smgcx16b-basement-lib-basement-0.0.11-haddock-doc/share/doc/basement/html/Basement-Compat-Base.html#t:Maybe" title="Basement.Compat.Base">Maybe</a> <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>) <a href="src/Docker.API.Client.Internal.Util.html#readUpstream" class="link">Source</a> <a href="#v:readUpstream" class="selflink">#</a></p><div class="doc"><p>Conduit helper which checks the length of the input bytestring and reads data from upstream
 until the length is at least nBytes. Note that this method may return a Bytestring result which
 has length &gt;= nBytes.</p></div></div><div class="top"><p class="src"><a id="v:getStreamType" class="def">getStreamType</a> :: <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> -&gt; <a href="Docker-API-Client-Internal-Types.html#t:DockerStreamType" title="Docker.API.Client.Internal.Types">DockerStreamType</a> <a href="src/Docker.API.Client.Internal.Util.html#getStreamType" class="link">Source</a> <a href="#v:getStreamType" class="selflink">#</a></p><div class="doc"><p>Parses the first byte from a stream metadata bytestring returned by the Docker Engine API
 and returns the corresponding stream type.</p></div></div><div class="top"><p class="src"><a id="v:getSectionLength" class="def">getSectionLength</a> :: <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> -&gt; <a href="file:///nix/store/fvxp4h4smnk2lgs6x7skf3w1smgcx16b-basement-lib-basement-0.0.11-haddock-doc/share/doc/basement/html/Basement-Compat-Base.html#t:Int" title="Basement.Compat.Base">Int</a> <a href="src/Docker.API.Client.Internal.Util.html#getSectionLength" class="link">Source</a> <a href="#v:getSectionLength" class="selflink">#</a></p><div class="doc"><p>Converts an 8 byte section length ByteString into an integer. This value
 indicates the number of data bytes in the body of a Docker Engine stream record.</p></div></div><div class="top"><p class="src"><a id="v:parseDockerStream" class="def">parseDockerStream</a> :: <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> -&gt; (<a href="Docker-API-Client-Internal-Types.html#t:DockerStreamType" title="Docker.API.Client.Internal.Types">DockerStreamType</a>, <a href="file:///nix/store/fvxp4h4smnk2lgs6x7skf3w1smgcx16b-basement-lib-basement-0.0.11-haddock-doc/share/doc/basement/html/Basement-Compat-Base.html#t:Int" title="Basement.Compat.Base">Int</a>, <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>) <a href="src/Docker.API.Client.Internal.Util.html#parseDockerStream" class="link">Source</a> <a href="#v:parseDockerStream" class="selflink">#</a></p><div class="doc"><p>Parses a docker metadata bytestring of length &gt;= 8 into it's individual components
 See <a href="https://docs.docker.com/engine/api/v1.40/#operation/ContainerAttach">https://docs.docker.com/engine/api/v1.40/#operation/ContainerAttach</a></p></div></div><div class="top"><p class="src"><a id="v:parseMultiplexedDockerStream" class="def">parseMultiplexedDockerStream</a> :: <a href="file:///nix/store/h7rgfn42l8i9kiiyk7jsg6506z5dsgm0-conduit-lib-conduit-1.3.2.1-haddock-doc/share/doc/conduit/html/Conduit.html#t:MonadIO" title="Conduit">MonadIO</a> m =&gt; <a href="file:///nix/store/h7rgfn42l8i9kiiyk7jsg6506z5dsgm0-conduit-lib-conduit-1.3.2.1-haddock-doc/share/doc/conduit/html/Data-Conduit.html#t:ConduitT" title="Data.Conduit">ConduitT</a> <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a> (<a href="Docker-API-Client-Internal-Types.html#t:DockerStreamType" title="Docker.API.Client.Internal.Types">DockerStreamType</a>, <a href="file:///nix/store/5fjwz5b3pwsjdqb3cn0i3s52gg7r0qln-utf8-string-lib-utf8-string-1.0.1.1-haddock-doc/share/doc/utf8-string/html/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>) m () <a href="src/Docker.API.Client.Internal.Util.html#parseMultiplexedDockerStream" class="link">Source</a> <a href="#v:parseMultiplexedDockerStream" class="selflink">#</a></p><div class="doc"><p>Conduit for parsing a multiplexed stream from the Docker Engine API (e.g. the output of the attatch and logs endpoints).
 This will force memory usage up to the returned frame size (for docker logs this is usually just one line of text).
 See <a href="https://docs.docker.com/engine/api/v1.40/#operation/ContainerAttach">https://docs.docker.com/engine/api/v1.40/#operation/ContainerAttach</a> for more details on this format.</p></div></div><div class="top"><p class="src"><a id="v:createLogTypeFilter" class="def">createLogTypeFilter</a> :: <a href="Docker-API-Client-Internal-Types.html#t:ContainerLogType" title="Docker.API.Client.Internal.Types">ContainerLogType</a> -&gt; (<a href="Docker-API-Client-Internal-Types.html#t:DockerStreamType" title="Docker.API.Client.Internal.Types">DockerStreamType</a>, a) -&gt; <a href="file:///nix/store/fvxp4h4smnk2lgs6x7skf3w1smgcx16b-basement-lib-basement-0.0.11-haddock-doc/share/doc/basement/html/Basement-Compat-Base.html#t:Bool" title="Basement.Compat.Base">Bool</a> <a href="src/Docker.API.Client.Internal.Util.html#createLogTypeFilter" class="link">Source</a> <a href="#v:createLogTypeFilter" class="selflink">#</a></p><div class="doc"><p>Creates a DockerStreamType filter using the input ContainerLogType</p></div></div><div class="top"><p class="src"><a id="v:chownTarballContent" class="def">chownTarballContent</a> :: <a href="file:///nix/store/m9v8rxbg6rqcq45virm46d1r2ixayzqk-tar-conduit-lib-tar-conduit-0.3.2-haddock-doc/share/doc/tar-conduit/html/Data-Conduit-Tar-Types.html#t:UserID" title="Data.Conduit.Tar.Types">UserID</a> -&gt; <a href="file:///nix/store/m9v8rxbg6rqcq45virm46d1r2ixayzqk-tar-conduit-lib-tar-conduit-0.3.2-haddock-doc/share/doc/tar-conduit/html/Data-Conduit-Tar-Types.html#t:GroupID" title="Data.Conduit.Tar.Types">GroupID</a> -&gt; <a href="file:///nix/store/m9v8rxbg6rqcq45virm46d1r2ixayzqk-tar-conduit-lib-tar-conduit-0.3.2-haddock-doc/share/doc/tar-conduit/html/Data-Conduit-Tar-Types.html#t:FileInfo" title="Data.Conduit.Tar.Types">FileInfo</a> -&gt; <a href="file:///nix/store/m9v8rxbg6rqcq45virm46d1r2ixayzqk-tar-conduit-lib-tar-conduit-0.3.2-haddock-doc/share/doc/tar-conduit/html/Data-Conduit-Tar-Types.html#t:FileInfo" title="Data.Conduit.Tar.Types">FileInfo</a> <a href="src/Docker.API.Client.Internal.Util.html#chownTarballContent" class="link">Source</a> <a href="#v:chownTarballContent" class="selflink">#</a></p><div class="doc"><p>Replaces the user and group id for an entry in a tarball with the specified user and group</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.23.0</p></div></body></html>